Title	O
:	O

Adding	O
new	O
column	O
to	O
existing	O
DataFrame	B-API
in	O
python	O
pandas	O

Q	O
:	O

I	O
have	O
a	O
DataFrame	B-API
with	O
named	O
columns	O
and	O
rows	O
indexed	O
with	O
not	O
continuous	O
numbers	O
like	O
from	O
the	O
code	O
:	O

@CODE	O

I	O
would	O
like	O
to	O
add	B-API
new	O
column	O
'	O
e	O
'	O
to	O
the	O
existing	O
df	O
and	O
do	O
not	O
change	O
anything	O
in	O
the	O
df	O
.	O

(	O
The	O
series	O
got	O
always	O
the	O
same	O
length	O
as	O
a	O
dataframe	O
.	O
)	O
I	O
try	O
different	O
version	O
of	O
`	O
join	B-API
`	O
,	O
`	O
append	B-API
`	O
,	O
`	O
merge	B-API
`	O
but	O
do	O
not	O
have	O
this	O
what	O
I	O
want	O
,	O
error	O
at	B-API
the	O
most	O
.	O

The	O
series	O
and	O
df	O
is	O
already	O
given	O
and	O
above	O
code	O
is	O
only	O
to	O
illustrate	O
example	O
.	O

I	O
am	O
sure	O
there	O
is	O
some	O
easy	O
way	O
to	O
that	O
but	O
can't	O
figure	O
it	O
out	O

A1	O
:	O

Doing	O
this	O
directly	O
is	O
via	O
numpy	O
will	O
be	O
most	O
efficient	O
:	O

@CODE	O

Note	O
my	O
original	O
(	O
very	O
old	O
)	O
suggestion	O
was	O
to	O
use	O
`	O
map	B-API
`	O
(	O
which	O
is	O
much	O
slower	O
):	O

@CODE	O

A2	O
:	O

Use	O
the	O
original	O
df1	O
indexes	O
to	O
create	O
the	O
series	O
:	O

@CODE	O

Edit	O
2015	O

Some	O
reported	O
to	O
get	B-API
the	O
`	O
SettingWithCopyWarning	O
`	O
with	O
this	O
code	O
.	O

However	O
the	O
code	O
still	O
runs	O
perfect	O
with	O
the	O
newer	O
version	O
.	O

@CODE	O

The	O
`	O
SettingWithCopyWarning	O
`	O
aims	O
to	O
inform	O
of	O
a	O
possibly	O
invalid	O
assignment	O
on	O
a	O
copy	B-API
of	O
the	O
Dataframe	O
.	O

It	O
doesn't	O
necessarily	O
say	O
you	O
did	O
it	O
wrong	O
(	O
it	O
can	O
trigger	O
false	O
positives	O
)	O
but	O
from	O
0.13.0	O
it	O
let	O
you	O
know	O
there	O
are	O
more	O
adequate	O
methods	O
for	O
the	O
same	O
purpose	O
.	O

Then	O
,	O
if	O
you	O
get	B-API
the	O
warning	O
,	O
just	O
follow	O
its	O
advise	O
:	O
Try	O
using	O
.loc	O
[row_index	O
,	O
col_indexer	O
]	O
=	O
value	O
instead	O

@CODE	O

In	O
fact	O
this	O
is	O
currently	O
the	O
more	O
efficient	O
method	O
as	O
described	O
in	O
panda	O
docs	O

A3	O
:	O

This	O
is	O
the	O
simple	O
way	O
of	O
adding	O
a	O
new	O
column	O
:	O
`df['e	O
'	O
]	O
=	O
e	O
`	O

A4	O
:	O

One	O
thing	O
to	O
note	O
,	O
thought	O
,	O
is	O
that	O
if	O
you	O
do	O

@CODE	O

this	O
will	O
effectively	O
be	O
a	O
left	O
join	B-API
on	O
the	O
df1.index	O
.	O

So	O
if	O
you	O
want	O
to	O
have	O
an	O
outer	O
join	B-API
effect	O
,	O
my	O
probably	O
imperfect	O
solution	O
is	O
to	O
create	O
a	O
dataframe	O
with	O
index	O
values	B-API
covering	O
the	O
universe	O
of	O
your	O
data	B-API
,	O
and	O
then	O
use	O
the	O
code	O
above	O
.	O

E.g	O
.	O

@CODE	O

A5	O
:	O

I	O
got	O
the	O
dread	O
`	O
SettingWithCopyWarning	O
`	O
and	O
wasn't	O
fixed	O
by	O
using	O
the	O
iloc	B-API
syntax	O
.	O

My	O
DataFrame	B-API
was	O
created	O
by	O
read_sql	B-API
from	O
an	O
ODBC	O
source	O
.	O

Using	O
a	O
suggestion	O
by	O
lowtech	O
above	O
the	O
following	O
worked	O
for	O
me	O
:	O

@CODE	O

This	O
worked	O
fine	O
to	O
insert	B-API
the	O
column	O
at	B-API
the	O
end	O
.	O

I	O
don't	O
know	O
if	O
it	O
is	O
the	O
most	O
efficient	O
but	O
I	O
don't	O
like	O
warning	O
messages	O
.	O

I	O
think	O
there	O
is	O
a	O
better	O
solution	O
but	O
can't	O
find	O
it	O
and	O
I	O
think	O
it	O
depends	O
on	O
some	O
aspect	O
of	O
the	O
index	O
.	O

A6	O
:	O

Before	O
assigning	O
a	O
new	O
column	O
,	O
if	O
you	O
have	O
indexed	O
data	B-API
,	O
you	O
need	O
to	O
sort	B-API
the	O
index	O
.	O

At	O
least	O
in	O
my	O
case	O
I	O
had	O
to	O
:	O

@CODE	O
