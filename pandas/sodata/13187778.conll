Convert	O
pandas	O
dataframe	B-API
to	O
numpy	O
array	O
,	O
preserving	O
index	O

I	O
am	O
interested	O
in	O
knowing	O
how	O
to	O
convert	O
a	O
pandas	O
dataframe	B-API
into	O
a	O
numpy	O
array	O
,	O
including	O
the	O
index	O
,	O
and	O
set	O
the	O
dtypes	B-API
.	O

dataframe	B-API
:	O

@CODE	O

convert	O
df	B-API
to	O
array	O
returns	O
:	O

@CODE	O

However	O
,	O
I	O
would	O
like	O
:	O

@CODE	O

(	O
or	O
similar	O
)	O

Any	O
suggestions	O
on	O
how	O
to	O
accomplish	O
this	O
?	O

(	O
I	O
don't	O
know	O
if	O
I	O
need	O
1D	O
or	O
2D	O
array	O
at	O
this	O
point	O
.	O
)	O
I've	O
seen	O
a	O
few	O
posts	O
that	O
touch	O
on	O
this	O
,	O
but	O
nothing	O
dealing	O
specifically	O
with	O
the	O
dataframe.index	O
.	O

I	O
am	O
writing	O
the	O
dataframe	B-API
disk	O
using	O
to_csv	B-API
(	O
and	O
reading	O
it	O
back	O
in	O
to	O
create	O
array	O
)	O
as	O
a	O
workaround	O
,	O
but	O
would	O
prefer	O
something	O
more	O
eloquent	O
than	O
my	O
new-to-pandas	O
kludging	O
.	O

You	O
can	O
use	O
the	O
`	O
to_records	B-API
`	O
method	O
,	O
but	O
have	O
to	O
play	O
around	O
a	O
bit	O
with	O
the	O
dtypes	B-API
if	O
they	O
are	O
not	O
what	O
you	O
want	O
from	O
the	O
get	O
go	O
.	O

In	O
my	O
case	O
,	O
having	O
copied	O
your	O
DF	O
from	O
a	O
string	O
,	O
the	O
index	O
type	O
is	O
string	O
(	O
represented	O
by	O
an	O
`	O
object	O
`	O
dtype	B-API
in	O
pandas	O
):	O

@CODE	O

Converting	O
the	O
recarray	O
dtype	B-API
does	O
not	O
work	O
for	O
me	O
,	O
but	O
one	O
can	O
do	O
this	O
in	O
Pandas	O
already	O
:	O

@CODE	O

Note	O
that	O
Pandas	O
does	O
not	O
set	O
the	O
name	O
of	O
the	O
index	O
properly	O
(	O
to	O
`	O
ID	O
`)	O
in	O
the	O
exported	O
record	O
array	O
(	O
a	O
bug	O
?	O
)	O
,	O
so	O
we	O
profit	O
from	O
the	O
type	O
conversion	O
to	O
also	O
correct	O
for	O
that	O
.	O

At	O
the	O
moment	O
Pandas	O
has	O
only	O
8-b	O
yte	O
integers	O
,	O
`	O
i8	O
`	O
,	O
and	O
floats	O
,	O
`	O
f8	O
`	O
(	O
see	O
this	O
issue	O
)	O
.	O

I	O
would	O
just	O
chain	O
the	O
DataFrame.reset_index()	B-API
and	O
DataFrame.values	B-API
functions	O
to	O
get	O
the	O
Numpy	O
representation	O
of	O
the	O
dataframe	B-API
,	O
including	O
the	O
index	O
:	O

@CODE	O

To	O
get	O
the	O
dtypes	B-API
we'd	O
need	O
to	O
transform	O
this	O
ndarray	O
into	O
a	O
structured	O
array	O
using	O
view	O
:	O

@CODE	O

Pandas	O
has	O
something	O
built	O
in	O
...	O

@CODE	O

Here	O
is	O
my	O
approach	O
to	O
making	O
a	O
structure	O
array	O
from	O
a	O
pandas	O
DataFrame	B-API
.	O

Create	O
the	O
data	O
frame	O

@CODE	O

Define	O
function	O
to	O
make	O
a	O
numpy	O
structure	O
array	O
(	O
not	O
a	O
record	O
array	O
)	O
from	O
a	O
pandas	O
DataFrame	B-API
.	O

@CODE	O

Use	O
`	O
reset_index	B-API
`	O
to	O
make	O
a	O
new	O
data	O
frame	O
that	O
includes	O
the	O
index	O
as	O
part	O
of	O
its	O
data	O
.	O

Convert	O
that	O
data	O
frame	O
to	O
a	O
structure	O
array	O
.	O

@CODE	O
